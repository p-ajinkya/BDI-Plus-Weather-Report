<div class="container py-5">
  <h2 class="text-center text-white">BIDPlus Weather App</h2>
  <div class="row justify-content-center">
    <div class="col-md-4">
      <h3 class="text-center my-4 text-white">Weather By City</h3>

      <form
        class="d-flex flex-column align-item-center justify-content-center"
        style="height: 300px"
        [formGroup]="weatherSearchForm"
        (ngSubmit)="sendToAPIXU(weatherSearchForm.value)"
      >
        <label class="text-white fs-6">Enter City Name</label>

        <div class="form-group">
          <input
            class="form-control"
            type="text"
            id="weatherLocation"
            aria-describedby="weatherLocation"
            placeholder="Please input a city here"
            formControlName="location"
          />
        </div>
        <div class="text-center mt-4">
          <button type="submit" class="btn btn-success btn-md">Submit</button>
        </div>
      </form>
    </div>
    <div class="col-md-8">
      <h3 class="text-center my-4 text-white">
        Weather Details: {{ weatherSearchForm.value?.location }}
      </h3>
      <div class="container-fluid" *ngIf="weatherData">
        <div class="row justify-content-center">
          <div class="col-12 col-md-8 col-sm-12 col-xs-12">
            <div
              class="card p-4"
              [ngClass]="{
                'bg-img': getDayorNight() === 'sunny',
                'bg-night': getDayorNight() === 'nighticon'
              }"
            >
              <div class="d-flex">
                <h4 class="flex-grow-1">{{ weatherData?.name }}</h4>
                <h6>
                  {{ currentDay?.name }},
                  {{ weatherData?.dt | timestampToTime }}
                  <i-feather
                    (click)="sendToAPIXU(weatherSearchForm.value)"
                    name="refresh-cw"
                    class="small"
                  ></i-feather>
                </h6>
              </div>

              <div class="d-flex flex-column temp mt-5 mb-3">
                <h1 class="mb-0 font-weight-bold" id="heading">
                  {{ weatherData?.main?.temp | fahrenheitToCelsius }}&deg; C
                </h1>
                <span class="small grey"
                  >{{ weatherData?.weather[0]?.main }}
                  {{ weatherData?.main?.humidity }}% Humidity</span
                >
              </div>

              <div class="d-flex">
                <div class="temp-details flex-grow-1">
                  <p class="my-1">
                    <i-feather
                      name="wind"
                      style="width: 16px !important"
                    ></i-feather>

                    <span class="ml-4">
                      {{ weatherData?.wind?.speed * 10 | number : "1.2-2" }}
                      km/h
                    </span>
                  </p>
                  <p class="my-1">
                    <i-feather
                      name="sunrise"
                      style="width: 16px !important"
                    ></i-feather>

                    <span class="ml-4">
                      {{ weatherData?.sys?.sunrise | timestampToTime }}
                    </span>
                  </p>
                  <p class="my-1">
                    <i-feather
                      name="sunset"
                      style="width: 16px !important"
                    ></i-feather>

                    <span class="ml-4">
                      {{ weatherData?.sys?.sunset | timestampToTime }}
                    </span>
                  </p>
                </div>

                <div>
                  <ng-lottie
                    *ngIf="getDayorNight() === 'sunny'"
                    width="100px"
                    height="100px"
                    containerClass="moving-box"
                    [options]="lottieConfig"
                  ></ng-lottie>
                  <ng-lottie
                    *ngIf="getDayorNight() === 'nighticon'"
                    width="100px"
                    height="100px"
                    containerClass="moving-box"
                    [options]="nightConfig"
                  ></ng-lottie>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="p-4">
        <div
          class="row justify-content-center text-white error-msg"
          *ngIf="error"
        >
          <h6>{{ error?.cod }}</h6>
          <h6>{{ error?.message | uppercase }}</h6>
        </div>
      </div>
      <div class="p-5">
        <div
          class="row justify-content-center text-white"
          *ngIf="!weatherSearchForm.value?.location"
        >
          Please Enter The City Name
        </div>
      </div>
    </div>
  </div>
</div>
